<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VRChat Avatar Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f0b1f;
      --ink:#e8e8f2;
      --muted:rgba(255,255,255,.75);
      --accent:#54e4c4;
      --accent2:#7f5bff;
      --radius:12px;
    }

    /* Page */
    body{
      background:#1a1a1a;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      margin:0;
      padding:20px 0;
      font-family:'Montserrat',sans-serif;
      color:var(--ink);
    }

    /* Card */
    .calc-card{
      max-width:1000px;
      width:95%;
      margin:auto;
      background:var(--bg);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:0 8px 16px rgba(0,0,0,.4);
    }

    /* Table (desktop) */
    .unified{
      width:100%;
      table-layout:fixed;
      border-collapse:collapse;
      background:var(--bg);
    }
    .unified caption{
      font-size:1.75rem;
      font-weight:700;
      padding:1.25rem;
      color:#fff;
      background:linear-gradient(90deg, var(--accent2), var(--accent));
    }
    .unified th,.unified td{
      padding:1rem;
      border:1px solid rgba(255,255,255,.15);
      vertical-align:top;
      color:#eee;
      font-size:.95rem;
    }
    .unified thead th{
      background:rgba(127,91,255,.3);
      font-weight:700;
      text-align:left;
    }
    .unified tbody tr:nth-child(even){
      background:rgba(127,91,255,.08);
    }

    /* Inputs & labels */
    .unified td label{
      display:flex;
      align-items:center;
      gap:.6rem;
      margin-bottom:.5rem;
      cursor:pointer;
      line-height:1.35;
    }
    .unified input[type="radio"],
    .unified input[type="checkbox"]{
      accent-color:var(--accent);
      transform:scale(1.15);
      cursor:pointer;
    }
    .text-input{
      width:100%;
      padding:10px;
      border:1px solid var(--accent);
      background:#1a1a1a;
      color:#eee;
      border-radius:8px;
      font-size:1rem;
      box-sizing:border-box;
    }

    /* Qty groups */
    .qty-group{display:none; margin:.35rem 0 .25rem 2rem;}
    .qty-group label{margin:0}
    .qty-group input[type="number"]{
      width:64px; padding:6px; text-align:center;
      border:1px solid var(--accent); border-radius:6px;
      background:#1a1a1a; color:#eee;
    }

    .total-row td{
      background:rgba(127,91,255,.2);
      font-weight:700; font-size:1.1rem;
    }
    .surcharge-text{ font-size:.9em; color:#ffcc00; }

    /* Actions */
    .calc-actions{ padding:0 1rem 1.25rem; text-align:center; }
    .calc-actions button{
      background:var(--accent); color:#0f0b1f;
      padding:12px 24px; border:0; border-radius:8px;
      font-weight:700; font-size:1.05rem; cursor:pointer;
      transition:transform .2s ease, filter .2s ease;
      box-shadow:0 4px 8px rgba(0,0,0,.25);
    }
    .calc-actions button:hover{ transform:translateY(-2px); filter:saturate(1.05); }
    .calc-actions textarea{
      width:100%; min-height:150px; margin-top:1rem;
      border:1px solid var(--accent); border-radius:8px;
      background:#1a1a1a; color:#eee; resize:vertical;
      font-family:'Fira Code',monospace; line-height:1.55; box-sizing:border-box; padding:14px;
    }

    /* Description ULs */
    .unified td ul{ list-style:none; padding:0; margin:0; }
    .unified td ul li{ margin-bottom:.45rem; line-height:1.4; }
    .unified td ul li:last-child{ margin-bottom:0; }

    /* ---------- RESPONSIVE ---------- */

    /* Tablet helper: pack choices into two columns for mid widths */
    @media (max-width:900px){
      .unified caption{ font-size:1.5rem; padding:1rem; }
      .unified th,.unified td{ padding:.85rem; font-size:.92rem; }
      /* turn each row into a card */
      .unified thead{ display:none; }
      .unified, .unified tbody, .unified tr, .unified td{ display:block; width:100%; }
      .unified tbody tr{
        background:#0f0b1f;
        border:1px solid rgba(255,255,255,.15);
        border-radius:10px;
        padding:.85rem;
        margin:0 0 .9rem 0;
      }
      .unified tbody tr:nth-child(even){ background:#0f0b1f; }
      .unified tbody tr td{ border:0; padding:.35rem 0; }
      /* first cell = row title */
      .unified tbody tr td:first-child{
        font-weight:700; background:rgba(127,91,255,.12);
        padding:.55rem .7rem; border-radius:8px; margin-bottom:.5rem;
      }
      /* second cell (Your Choice) — tidy grid for radios/checkboxes */
      .unified tbody tr td:nth-child(2){
        display:grid; gap:.4rem;
        grid-template-columns:repeat(2,minmax(0,1fr));
      }
      /* rows with a single input (like Name) fall back to one col */
      .unified tbody tr td:nth-child(2):has(input[type="text"]){
        display:block;
      }
      /* Description back to bullets for readability */
      .unified tbody tr td:last-child ul{
        list-style:disc; padding-left:1.1rem;
      }
    }

    @media (max-width:600px){
      .unified tbody tr td:nth-child(2){
        grid-template-columns:1fr; /* one column on small phones */
      }
      .unified caption{ font-size:1.3rem; }
      .calc-actions textarea{ min-height:120px; }
    }
  </style>
</head>
<body>
  <div class="calc-card">
    <table class="unified calc-table">
      <caption>Configure Your VRChat Avatar</caption>
      <colgroup>
        <col style="width:24%">
        <col style="width:36%">
        <col style="width:40%">
      </colgroup>
      <thead>
        <tr>
          <th>Option</th>
          <th>Your Choice</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <!-- Name -->
        <tr>
          <td>Name</td>
          <td><input type="text" id="userName" placeholder="Enter your name" class="text-input"></td>
          <td>Enter your name or project name.</td>
        </tr>

        <!-- Speed -->
        <tr>
          <td>Speed</td>
          <td>
            <label><input type="radio" name="speed" value="1" checked> Standard</label>
            <label><input type="radio" name="speed" value="1.5"> Express (+50%)</label>
          </td>
          <td>
            <ul>
              <li><strong>Standard</strong>: Regular turnaround, no extra fee.</li>
              <li><strong>Express</strong>: Priority service with a 50% surcharge.</li>
            </ul>
          </td>
        </tr>

        <!-- Delivery -->
        <tr>
          <td>Delivery</td>
          <td id="delivery">3–6 months</td>
          <td>Estimated completion based on selected speed.</td>
        </tr>

        <!-- Base -->
        <tr>
          <td>Base</td>
          <td>
            <label><input type="radio" name="base" value="0" data-base="0" checked> Ready‑made Base – <span class="price-text" data-base="0">€0.00</span></label>
            <label><input type="radio" name="base" value="200" data-base="200"> Custom Base – <span class="price-text" data-base="200">€200.00</span></label>
            <label><input type="radio" name="base" value="300" data-base="300"> Complex Custom Base – <span class="price-text" data-base="300">€300.00</span></label>
          </td>
          <td>
            <ul>
              <li><strong>Ready‑made Base</strong>: Use a pre‑existing avatar template.</li>
              <li><strong>Custom Base</strong>: Create a new model from scratch.</li>
              <li><strong>Complex Custom Base</strong>: Advanced modeling with detailed features.</li>
            </ul>
          </td>
        </tr>

        <!-- Texture -->
        <tr>
          <td>Texture</td>
          <td>
            <label><input type="radio" name="texture" value="0" data-base="0"> Own – <span class="price-text" data-base="0">€0.00</span></label>
            <label><input type="radio" name="texture" value="50" data-base="50" checked> Custom Texture – <span class="price-text" data-base="50">€50.00</span></label>
            <label><input type="radio" name="texture" value="75" data-base="75"> Complex Custom Texture – <span class="price-text" data-base="75">€75.00</span></label>
          </td>
          <td>
            <ul>
              <li><strong>Own</strong>: Upload your own textures.</li>
              <li><strong>Custom Texture</strong>: Standard detailing.</li>
              <li><strong>Complex Custom Texture</strong>: High‑detail texturing.</li>
            </ul>
          </td>
        </tr>

        <!-- Core Services -->
        <tr>
          <td>Core Services</td>
          <td>
            <label><input type="checkbox" name="item" data-base="12.5" value="12.5"> Functionality Setup – <span class="price-text" data-base="12.5">€12.50</span></label>
            <label><input type="checkbox" name="item" data-base="12.5" value="12.5"> Meta Quest – <span class="price-text" data-base="12.5">€12.50</span></label>
            <label><input type="checkbox" name="item" data-base="12.5" value="12.5"> Optimization – <span class="price-text" data-base="12.5">€12.50</span></label>
          </td>
          <td>
            <ul>
              <li><strong>Functionality Setup</strong>: Configure controls/gestures.</li>
              <li><strong>Meta Quest</strong>: Optimize for Meta Quest.</li>
              <li><strong>Optimization</strong>: Improve performance.</li>
            </ul>
          </td>
        </tr>

        <!-- Add‑ons -->
        <tr>
          <td>Add‑ons</td>
          <td>
            <label><input type="checkbox" id="toggle-extra"> Extra Add‑ons – <span class="price-text" data-base="12.5">€12.50 each</span></label>
            <div id="extra-settings" class="qty-group"><label>Qty: <input type="number" id="extra_qty" value="1" min="1"></label></div>
            <label><input type="checkbox" id="toggle-complex"> Complex Add‑ons – <span class="price-text" data-base="25">€25.00 each</span></label>
            <div id="complex-settings" class="qty-group"><label>Qty: <input type="number" id="complex_qty" value="1" min="1"></label></div>
          </td>
          <td>
            <ul>
              <li><strong>Extra Add‑ons</strong>: Use pre‑made assets.</li>
              <li><strong>Complex Add‑ons</strong>: Custom modifications.</li>
            </ul>
          </td>
        </tr>

        <!-- Editing Services -->
        <tr>
          <td>Editing Services</td>
          <td>
            <label><input type="checkbox" id="toggle-edit"> Edit – <span class="price-text" data-base="25">€25.00 each</span></label>
            <div id="edit-settings" class="qty-group"><label>Qty: <input type="number" id="edit_qty" value="1" min="1"></label></div>
            <label><input type="checkbox" id="toggle-complex-edit"> Complex Edit – <span class="price-text" data-base="50">€50.00 each</span></label>
            <div id="complex-edit-settings" class="qty-group"><label>Qty: <input type="number" id="complex_edit_qty" value="1" min="1"></label></div>
          </td>
          <td>
            <ul>
              <li><strong>Edit</strong>: Minor tweaks to existing assets.</li>
              <li><strong>Complex Edit</strong>: In‑depth custom changes.</li>
            </ul>
          </td>
        </tr>

        <!-- Minimum -->
        <tr class="min-row">
          <td colspan="3" style="text-align:center; font-style:italic; font-size:.9rem;">
            Minimum total is €25; surcharge applies if below.
          </td>
        </tr>

        <!-- Total -->
        <tr class="total-row">
          <td>Total</td>
          <td id="sumValue">€0.00 <span id="surchargeDisplay" class="surcharge-text"></span></td>
          <td>Based on your selections.</td>
        </tr>
      </tbody>
    </table>

    <div class="calc-actions">
      <button id="saveToTextBtn">Save to Text</button>
      <textarea id="outputText" rows="10" readonly placeholder="Your configuration will appear here..."></textarea>
    </div>
  </div>

  <script>
    (function(){
      const $ = s => document.querySelector(s);
      const $$ = s => document.querySelectorAll(s);

      const table = $('.unified');
      const userNameInput = $('#userName');
      const sumEl = $('#sumValue');
      const surchargeDisplay = $('#surchargeDisplay');
      const deliveryEl = $('#delivery');

      const toggleExtra = $('#toggle-extra');
      const toggleComplex = $('#toggle-complex');
      const extraSettings = $('#extra-settings');
      const complexSettings = $('#complex-settings');
      const extraQtyInput = $('#extra_qty');
      const complexQtyInput = $('#complex_qty');

      const toggleEdit = $('#toggle-edit');
      const editSettings = $('#edit-settings');
      const editQtyInput = $('#edit_qty');

      const toggleComplexEdit = $('#toggle-complex-edit');
      const complexEditSettings = $('#complex-edit-settings');
      const complexEditQtyInput = $('#complex_edit_qty');

      const saveToTextBtn = $('#saveToTextBtn');
      const outputTextarea = $('#outputText');

      function updateDisplayedPrices(mult){
        $$('.price-text').forEach(span=>{
          const base = parseFloat(span.dataset.base);
          const newPrice = base * mult;
          span.textContent = `€${newPrice.toFixed(2)}`;
        });
      }

      function calculateSum(){
        let total = 0;
        let speedMultiplier = 1;
        const minTotal = 25;
        let surchargeAmount = 0;

        $$('input[name="speed"]').forEach(r=>{ if(r.checked) speedMultiplier = parseFloat(r.value); });
        updateDisplayedPrices(speedMultiplier);

        $$('input[name="base"]').forEach(r=>{ if(r.checked) total += parseFloat(r.value) * speedMultiplier; });
        $$('input[name="texture"]').forEach(r=>{ if(r.checked) total += parseFloat(r.value) * speedMultiplier; });
        $$('input[name="item"]').forEach(c=>{ if(c.checked) total += parseFloat(c.value) * speedMultiplier; });

        if (toggleExtra.checked)  total += (parseInt(extraQtyInput.value)||0)  * 12.5 * speedMultiplier;
        if (toggleComplex.checked) total += (parseInt(complexQtyInput.value)||0) * 25   * speedMultiplier;
        if (toggleEdit.checked)    total += (parseInt(editQtyInput.value)||0)         * 25   * speedMultiplier;
        if (toggleComplexEdit.checked) total += (parseInt(complexEditQtyInput.value)||0) * 50 * speedMultiplier;

        if (total < minTotal){
          surchargeAmount = (total === 0) ? minTotal : (minTotal - total);
          total = minTotal;
        } else {
          surchargeAmount = 0;
        }

        sumEl.textContent = `€${total.toFixed(2)}`;
        surchargeDisplay.textContent = surchargeAmount > 0 ? ` (surcharge: €${surchargeAmount.toFixed(2)} to min. €${minTotal.toFixed(2)})` : '';
      }

      function updateDelivery(){
        let selected = 'Standard';
        $$('input[name=\"speed\"]').forEach(r=>{ if(r.checked) selected = (r.value==='1.5' ? 'Express' : 'Standard'); });
        deliveryEl.textContent = selected === 'Standard' ? '3–6 months' : 'up to 1 month';
      }

      function saveToText(){
        let output = `VRChat Avatar Configuration\\n\\n`;
        output += `Name/Project Name: ${userNameInput.value || 'None'}\\n\\n`;

        let selectedSpeedText = 'Standard', speedMultiplier = 1;
        $$('input[name=\"speed\"]').forEach(r=>{ if(r.checked){ selectedSpeedText = r.labels[0].textContent.trim(); speedMultiplier = parseFloat(r.value);} });
        output += `Speed: ${selectedSpeedText}\\n`;
        output += `Delivery: ${deliveryEl.textContent}\\n\\n`;

        $$('input[name=\"base\"]').forEach(r=>{ if(r.checked) output += `Base: ${r.labels[0].textContent.replace(/–.*/, '').trim()} (${(parseFloat(r.value)*speedMultiplier).toFixed(2)}€)\\n`; });
        $$('input[name=\"texture\"]').forEach(r=>{ if(r.checked) output += `Texture: ${r.labels[0].textContent.replace(/–.*/, '').trim()} (${(parseFloat(r.value)*speedMultiplier).toFixed(2)}€)\\n`; });

        const core = [];
        $$('input[name=\"item\"]').forEach(c=>{ if(c.checked) core.push(`${c.labels[0].textContent.replace(/–.*/, '').trim()} (${(parseFloat(c.value)*speedMultiplier).toFixed(2)}€)`); });
        output += `Core Services: ${core.length?core.join(', '):'None'}\\n`;

        const addOns=[];
        if (toggleExtra.checked){
          const q = parseInt(extraQtyInput.value)||0;
          if (q>0) addOns.push(`${toggleExtra.labels[0].textContent.replace(/–.*/, '').trim()} (x${q}) (${(q*12.5*speedMultiplier).toFixed(2)}€)`);
        }
        if (toggleComplex.checked){
          const q = parseInt(complexQtyInput.value)||0;
          if (q>0) addOns.push(`${toggleComplex.labels[0].textContent.replace(/–.*/, '').trim()} (x${q}) (${(q*25*speedMultiplier).toFixed(2)}€)`);
        }
        output += `Add-ons: ${addOns.length?addOns.join(', '):'None'}\\n`;

        const edits=[];
        if (toggleEdit.checked){
          const q = parseInt(editQtyInput.value)||0;
          if (q>0) edits.push(`${toggleEdit.labels[0].textContent.replace(/–.*/, '').trim()} (x${q}) (${(q*25*speedMultiplier).toFixed(2)}€)`);
        }
        if (toggleComplexEdit.checked){
          const q = parseInt(complexEditQtyInput.value)||0;
          if (q>0) edits.push(`${toggleComplexEdit.labels[0].textContent.replace(/–.*/, '').trim()} (x${q}) (${(q*50*speedMultiplier).toFixed(2)}€)`);
        }
        output += `Editing Services: ${edits.length?edits.join(', '):'None'}\\n\\n`;

        output += `Total: ${sumEl.textContent}\\n`;
        $('#outputText').value = output;
      }

      table.addEventListener('change', e=>{
        if (e.target.matches('input[type="radio"], input[type="checkbox"], input[type="number"]')){
          calculateSum();
          if (e.target.name==='speed') updateDelivery();
        }
      });

      // Toggle qty groups
      const toggleQty = (toggleEl, boxEl, inputEl) => {
        toggleEl.addEventListener('change', ()=>{
          boxEl.style.display = toggleEl.checked ? 'block' : 'none';
          if(!toggleEl.checked) inputEl.value = 1;
          calculateSum();
        });
      };
      toggleQty(toggleExtra, extraSettings, extraQtyInput);
      toggleQty(toggleComplex, complexSettings, complexQtyInput);
      toggleQty(toggleEdit, editSettings, editQtyInput);
      toggleQty(toggleComplexEdit, complexEditSettings, complexEditQtyInput);

      document.addEventListener('DOMContentLoaded', ()=>{
        calculateSum();
        updateDelivery();
        extraSettings.style.display = toggleExtra.checked ? 'block' : 'none';
        complexSettings.style.display = toggleComplex.checked ? 'block' : 'none';
        editSettings.style.display = toggleEdit.checked ? 'block' : 'none';
        complexEditSettings.style.display = toggleComplexEdit.checked ? 'block' : 'none';
      });

      $('#saveToTextBtn').addEventListener('click', saveToText);
    })();
  </script>
</body>
</html>
